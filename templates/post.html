<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='/css/post.css') }}">

    <!-- CKEditor Script -->
    {{ ckeditor.load() }}
    
</head>
<body>
    
    {% include "header.html" %}
    
    <main class="post-container">
        <article class="post-content">
            <!-- Blog Post Image -->
            <div class="post-image">
                <img src="{{ post.img_url }}" alt="{{ post.title }}">
            </div>

            <!-- Blog Post Title -->
            <h1>{{ post.title }}</h1>
            <h3>{{ post.subtitle }}</h3>

            <!-- Blog Post Meta Info -->
            <div class="post-meta">
                <p>By <strong>{{ post.author.name }}</strong> | {{ post.date }}</p>
            </div>

            <!-- Blog Post Body -->
            <div class="post-body">
                {{ post.body | safe }}
            </div>
        </article>

        <!-- Comments Section -->
        <section class="comments-section">
            <h2>Comments</h2>

            <!-- Comments Form -->
            <form action="{{ url_for('get_each_post', post_id=post.id) }}" method="POST">
                {{ ckeditor.config(name='comment', value='', width='100%') }}
                {{ ckeditor.create('comment') }}
                <button type="submit" class="submit-btn">Add Comment</button>
            </form>

            <!-- Display Comments -->
            <div class="comments-list">
                {% for comment in post.comments %}
                <div class="comment-item">
                    <p><strong>{{ comment.author }}:</strong> {{ comment.body | safe }}</p>
                    <p><small>{{ comment.date_posted }}</small></p>
                </div>
                {% else %}
                <p>No comments yet. Be the first to comment!</p>
                {% endfor %}
            </div>
        </section>

        <!-- Back to Blog Button -->
        <div class="back-btn-container">
            <a href="{{ url_for('blogs') }}" class="back-btn">Back to Blogs</a>
        </div>
    </main>

    {% include "footer.html" %}

</body>
</html>